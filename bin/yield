#!/usr/bin/env ruby
require 'rbconfig'
require_relative '../lib/yield'

is_windows = (RbConfig::CONFIG['host_os'] =~ /mswin|mingw|cygwin/)

`stty -echoctl` unless is_windows

if ARGV.length == 1
  filename = ARGV[0]
  Yield::Markdown.init(filename)
else
  Yield::Markdown.init
end

Yield::Server.run!